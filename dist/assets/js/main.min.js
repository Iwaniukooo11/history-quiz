class Game{constructor(){this.allAnswers=document.querySelectorAll(".exercises__answer"),this.rowButton=document.querySelector(".section-about__btn"),this.rowButtonRow=document.querySelector(".section-about__fas"),this.checkButton=document.querySelector(".check-btn"),this.answersTable=["bbc","bcc","bac","acc","bca","aba","cab","bac","bca","cab"],this.answersString=this.answersTable.toString().split(",").join(""),this.resultBox=document.querySelector(".result"),this.resultSpan=document.querySelector(".result__userScore"),this.alertBox=document.querySelector(".alert"),this.blockGameElement=document.querySelector(".exercises-after"),this.exercisesUL=document.querySelector(".exercises"),this.playAgain=document.querySelector(".result__play-again"),this.exercisesLists=document.querySelectorAll(".exercises__answers"),this.tableOfListElemenrs=[];for(let e=0;e<this.exercisesLists.length;e++)this.tableOfListElemenrs.push([]),this.exercisesLists[e].childNodes.forEach(s=>{"LI"==s.tagName&&this.tableOfListElemenrs[e].push(s)});this.allAnswers.forEach(e=>{e.addEventListener("click",e=>{this.clickAnswer(e)})}),window.addEventListener("scroll",()=>{this.changeInline(this.rowButtonRow,"top",`${window.pageYOffset/5+52}%`)}),this.rowButton.addEventListener("click",()=>{this.animateToSection($(document.querySelector(".exercise1")).offset().top-10)}),this.checkButton.addEventListener("click",e=>{this.changeInline(e.target,"animation","check-btn-anim .3s linear"),setTimeout(()=>{this.changeInline(e.target,"animation","none")},300),this.checkScore(this.answersTable)}),this.playAgain.addEventListener("click",()=>{this.restartGame()})}clickAnswer(e){e.target.classList.contains("onBrown")||e.target.parentNode.childNodes.forEach(e=>{"LI"==e.tagName&&e.classList.remove("onBrown")}),e.target.classList.toggle("onBrown")}changeInline(e,s,t){e.style[s]=t}checkScore(e){this.userAnswers=document.querySelectorAll(".exercises__answers__answer.onBrown");let s=!1;if(30!=this.userAnswers.length)document.querySelectorAll(".exercises__answers").forEach(e=>{s||(this.checked=!1,e.childNodes.forEach(e=>{"LI"==e.tagName&&e.classList.contains("onBrown")&&(this.checked=!0)}),this.checked||(setTimeout(()=>{this.showError(),this.animateToSection($(e.parentElement).offset().top-10)},50),s=!0))});else{this.score=0,document.querySelectorAll(".onBrown").forEach((e,s)=>{e.classList.contains(`answer-${this.answersString[s]}`)?(e.classList.add("onGreen"),e.classList.remove("onBrown"),this.score++):(e.classList.add("onRed"),e.classList.remove("onBrown"))});let e=0;this.tableOfListElemenrs.forEach(s=>{s.forEach(s=>{!s.classList.contains(`answer-${this.answersString[e]}`)||s.classList.contains("onGreen")||s.classList.contains("onRed")||s.classList.add("onHalf-green")}),e++}),setTimeout(()=>{this.showScore(this.score,this.resultSpan,this.resultBox),this.animateToSection($(this.resultBox).offset().top-50)},100)}}showScore(e,s,t){s.textContent=e,this.changeInline(t,"display","block"),this.changeInline(this.blockGameElement,"height",`${this.exercisesUL.clientHeight}`),this.changeInline(this.blockGameElement,"display","block")}showError(){this.changeInline(this.alertBox,"display","block"),this.changeInline(this.alertBox,"animation","alert-anim 1s linear"),setTimeout(()=>{this.changeInline(this.alertBox,"display","none"),this.changeInline(this.alertBox,"animation","none")},1e3)}animateToSection(e,s=500){$("body,html").animate({scrollTop:e},s)}restartGame(){this.score=0,this.changeInline(this.resultBox,"display","none"),this.allAnswers.forEach(e=>{e.classList.remove("onBrown"),e.classList.remove("onGreen"),e.classList.remove("onRed"),e.classList.remove("onHalf-green")}),this.changeInline(this.blockGameElement,"display","none")}}const g=new Game;